
# Sports Arbitrage -> Telegram Bot

Ищет арбитражные связки на крупнейших букмекерских линиях через [The Odds API](https://theoddsapi.com/) и присылает сигналы в Telegram.

## Что умеет
- Поддерживает рынки **Moneyline/1x2 (h2h)** для 2‑х и 3‑х исходов
- Считает гарантированную маржу `edge` и распределяет банк на исходы
- Фильтр по минимальному edge, whitelist букмекеров
- Отправка сообщений в Telegram

## Быстрый запуск
1) Установите Python 3.10+  
2) Создайте бота в @BotFather и получите `TELEGRAM_BOT_TOKEN`, узнайте `TELEGRAM_CHAT_ID` (например, добавьте бота в личку/группу и возьмите ID через @userinfobot).
3) Получите бесплатный ключ на https://theoddsapi.com/ (`THEODDS_API_KEY`).
4) Скачайте архив проекта и распакуйте.
5) Создайте файл `.env` рядом с `main.py` на основе `.env.example` и заполните значения.
6) Установка зависимостей:
   ```bash
   pip install -r requirements.txt
   ```
7) Запуск:
   ```bash
   python main.py
   ```

## Переменные окружения (.env)
- `TELEGRAM_BOT_TOKEN` — токен бота
- `TELEGRAM_CHAT_ID` — ID чата/канала/группы, куда слать сигналы
- `THEODDS_API_KEY` — ключ The Odds API
- `SPORTS` — список видов спорта (например: `soccer_epl,basketball_nba`)
- `REGIONS` — регионы линий: `us,uk,eu,au`
- `MARKETS` — рынки, сейчас поддерживается `h2h`
- `MIN_EDGE_PCT` — минимальная маржа для алерта (в %)
- `POLL_SECONDS` — период опроса API
- `BOOKMAKER_WHITELIST` — список букмекеров через запятую (нижний регистр), чтобы ограничить поиск

## Как считается арбитраж
Для каждого события берутся **лучшие коэффициенты по каждому исходу** среди всех букмекеров. Если
\sum (1/коэф) < 1, то есть гарантированный профит. Бот также предлагает распределение банка (пример: на банк 100$).

## Замечания
- Ключ The Odds API на бесплатном тарифе имеет лимиты. При желании можно расширить провайдеров (добавить Pinnacle/Betfair и т.п.) — архитектура модульная.
- Реальные лимиты/ограничения у букмекеров и задержки обновления линий могут мешать исполнению арбитража.
- Используйте whitelist, чтобы исключать нежелательных букмекеров.

## Расширения
- Добавить рынки тоталов/форы.
- Поддержка потоковой передачи (webhooks) и базы данных для дедупликации сигналов.
- Добавить Dockerfile/systemd unit для автозапуска.
